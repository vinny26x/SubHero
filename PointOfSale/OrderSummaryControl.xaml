<UserControl x:Class="SubHero.PointOfSale.OrderSummaryControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:SubHero.PointOfSale"
             mc:Ignorable="d" 
             d:DesignHeight="720" d:DesignWidth="400">
    <Border BorderBrush="Black" BorderThickness="2" Padding="10">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Order Header -->
            <StackPanel Grid.Row="0" Margin="0,0,0,10">
                <TextBlock Text="Order Summary" FontSize="24" FontWeight="Bold" HorizontalAlignment="Center"/>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,5,0,0">
                    <TextBlock Text="Order #: " FontSize="14"/>
                    <TextBlock x:Name="OrderNumberTextBlock" Text="1" FontSize="14" FontWeight="Bold"/>
                </StackPanel>
                <TextBlock x:Name="DateTextBlock" Text="Date: 10/12/2025" FontSize="12" HorizontalAlignment="Center"/>
            </StackPanel>

            <!-- Items List with Edit buttons and Preparation Info -->
            <ListView x:Name="OrderListView" 
                      Grid.Row="1" 
                      BorderBrush="Gray" 
                      BorderThickness="1"
                      Margin="0,0,0,10">
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <Border BorderBrush="LightGray" BorderThickness="0,0,0,1" Padding="5" Margin="0,2">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <StackPanel Grid.Column="0">
                                    <!-- Item Name -->
                                    <TextBlock Text="{Binding Name}" FontWeight="Bold" FontSize="14"/>

                                    <!-- Preparation Information -->
                                    <ListView ItemsSource="{Binding PreparationInformation}" 
                                             BorderThickness="0"
                                             Background="Transparent"
                                             Margin="10,2,0,0">
                                        <ListView.ItemTemplate>
                                            <DataTemplate>
                                                <TextBlock Text="{Binding}" FontSize="11" Foreground="Gray"/>
                                            </DataTemplate>
                                        </ListView.ItemTemplate>
                                    </ListView>

                                    <!-- Price -->
                                    <TextBlock Text="{Binding Price, StringFormat='${0:F2}'}" 
                                              FontSize="12" 
                                              Margin="0,2,0,0"/>
                                </StackPanel>

                                <!-- Edit Button -->
                                <Button Grid.Column="1" 
                                       Content="Edit" 
                                       Width="60" 
                                       Height="30"
                                       Click="EditItem_Click"
                                       Tag="{Binding}"/>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>

            <!-- Order Totals -->
            <StackPanel Grid.Row="2">
                <StackPanel Orientation="Horizontal" Margin="0,5">
                    <TextBlock Text="Subtotal: " FontSize="16" Width="100"/>
                    <TextBlock x:Name="SubtotalTextBlock" Text="$0.00" FontSize="16" FontWeight="Bold"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal" Margin="0,5">
                    <TextBlock Text="Tax: " FontSize="16" Width="100"/>
                    <TextBlock x:Name="TaxTextBlock" Text="$0.00" FontSize="16" FontWeight="Bold"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal" Margin="0,5">
                    <TextBlock Text="Total: " FontSize="18" Width="100"/>
                    <TextBlock x:Name="TotalTextBlock" Text="$0.00" FontSize="18" FontWeight="Bold"/>
                </StackPanel>
            </StackPanel>
        </Grid>
    </Border>
</UserControl>